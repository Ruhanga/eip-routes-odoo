<routes xmlns="http://camel.apache.org/schema/spring">

	<route id="openmrs-add-odoo-identifier" errorHandlerRef="watcherErrorHandler">
		<from uri="direct:openmrs-add-odoo-identifier" />
		
		<log message="Adding odoo customer id to the patient identifier list" />

		<setBody>
			<simple>{"identifier": "${exchangeProperty.odoo-id}", "identifierType": "{{openmrs.odoo.patient.identifier.type.uuid}}"}</simple>
		</setBody>

		<setHeader name="Content-Type">
			<constant>Application/json</constant>
		</setHeader>

		<toD uri="{{openmrs.baseUrl}}/ws/rest/v1/patient/${exchangeProperty.order-instance.patient.uuid}/identifier?authMethod=Basic&amp;authUsername={{openmrs.username}}&amp;authPassword={{openmrs.password}}" />
		
		<log message="Successfully added odoo customer id to the patient identifier list" />
	</route>
</routes>