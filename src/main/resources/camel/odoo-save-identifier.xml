<routes xmlns="http://camel.apache.org/schema/spring">

	<route id="odoo-save-identifier" errorHandlerRef="watcherErrorHandler">
		<from uri="direct:odoo-save-identifier" />
		
		<log message="Adding odoo customer id to the patient identifier list" />

		<setBody>
			<simple>{"identifier": "${exchangeProperty.odoo-id}", "identifierType": "{{openmrs.odoo.patientIdType.uuid}}"}</simple>
		</setBody>

		<toD uri="{{openmrs.baseUrl}}/ws/rest/v1/patient/${exchangeProperty.order-instance.patient.uuid}/identifier?authMethod=Basic&amp;authUsername={{openmrs.username}}&amp;authPassword={{openmrs.password}}" />

		<log message="Successfully added odoo customer id to the patient identifier list" />
	</route>
</routes>